(this["webpackJsonpimage-engine"]=this["webpackJsonpimage-engine"]||[]).push([[0],{35:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),s=n.n(c),i=n(6),o=n(9),u=n(25),p=n(4),l=n(5),f=n(8),d=n(7),j=(n(35),n(3)),b=n.n(j),h=n(10),m=n(26),O=n.n(m).a.create({baseURL:"https://api.unsplash.com",headers:{Authorization:"Client-ID 01-YFKIzacYELDHBB_RcJaBf7eNNYhnjJMmqzopX6EA"}}),g=n(1),v=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={term:""},e.onFormSumbit=function(t){t.preventDefault(),e.props.newQuery(e.state.term),e.props.newImages()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{className:"outer-container",children:Object(g.jsx)("form",{onSubmit:this.onFormSumbit,className:"",children:Object(g.jsxs)("div",{className:"field container",children:[Object(g.jsx)("label",{className:"pd",children:Object(g.jsx)("i",{className:"fas fa-search"})}),Object(g.jsx)("input",{className:"input-field",type:"text",onChange:function(t){return e.setState({term:t.target.value})}})]})})})}}]),n}(r.a.Component),y=Object(i.b)(null,{newQuery:function(e){return function(){var t=Object(h.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"NEW_QUERY",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},newImages:function(){return function(){var e=Object(h.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/search/photos",{params:n().params});case 2:a=e.sent,t({type:"NEW_IMAGES",payload:a.data.results});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})(v),E=(n(56),function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).setSpans=function(){var e=a.imageRef.current.clientHeight,t=Math.ceil(e/30);a.setState({spans:t})},a.state={spans:0},a.imageRef=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.imageRef.current.addEventListener("load",this.setSpans),this.imageRef.current.addEventListener("load",(function(){if(!0===e.props.load_next){var t=new IntersectionObserver((function(n){n.forEach((function(n){n.isIntersecting&&(e.props.addPage(),e.props.addImages(),console.log("LOADED ANOTHER PAGE"),t.unobserve(e.imageRef.current))}))}),{});t.observe(e.imageRef.current)}}))}},{key:"render",value:function(){var e=this.props.image,t=e.description,n=e.urls;return Object(g.jsx)("div",{style:{gridRowEnd:"span ".concat(this.state.spans)},children:Object(g.jsx)("img",{ref:this.imageRef,alt:t,src:n.regular})})}}]),n}(r.a.Component)),x=Object(i.b)(null,{addPage:function(){return function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"ADD_PAGE"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addImages:function(){return function(){var e=Object(h.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/search/photos",{params:n().params});case 2:a=e.sent,t({type:"ADD_IMAGES",payload:a.data.results});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})(E),w=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=0,n=!1,a=this.props.images.map((function(a){return++t===e.props.images.length&&(n=!0),Object(g.jsx)(x,{image:a,load_next:n},a.id)}));return Object(g.jsx)("div",{className:"image-list",children:a})}}]),n}(r.a.Component),_=Object(i.b)((function(e){return{images:e.images}}),{})(w),N=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"ui container",style:{marginTop:"10px"},children:[Object(g.jsx)(y,{}),Object(g.jsx)(_,{})]})}}]),n}(r.a.Component),A=n(16),D=n(11),R={query:"",page:1,per_page:30},I=Object(o.b)({images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_IMAGES":return t.payload;case"ADD_IMAGES":return[].concat(Object(A.a)(e),Object(A.a)(t.payload));default:return e}},params:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_QUERY":return Object(D.a)(Object(D.a)({},R),{},{query:t.payload});case"ADD_PAGE":return Object(D.a)(Object(D.a)({},e),{},{page:e.page+1});default:return e}}}),S=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,k=Object(o.d)(I,S(Object(o.a)(u.a)));s.a.render(Object(g.jsx)(i.a,{store:k,children:Object(g.jsx)(N,{})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.69fa1dfc.chunk.js.map